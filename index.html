<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BORCHEV — Street Art & Photo/Retouch</title>
  <meta name="description" content="Borchev (Борщев) — street art, photography & retouch portfolio. Irvine, CA." />
  <style>
    :root{
      --bg:#0A0F1A;
      --text:#E6EAF2;
      --muted:#9BA3AE;
      --accent:#8A9A5B;
      --accent-glow:0 0 24px rgba(138,154,91,.35);
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}
    .container{width:min(1200px,92vw);margin-inline:auto}

    header{position:sticky;top:0;z-index:50;background:linear-gradient(180deg,rgba(10,15,26,.95),rgba(10,15,26,.75) 80%,rgba(10,15,26,0));backdrop-filter:blur(6px);border-bottom:1px solid rgba(255,255,255,.06)}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
    .logo{font-weight:800;letter-spacing:.18em}
    .logo .en{display:inline}
    .logo .ru{display:none}
    nav ul{display:flex;gap:22px;list-style:none;margin:0;padding:0}
    .lang-switch{display:flex;gap:8px;align-items:center}
    .pill{border:1px solid rgba(255,255,255,.14);padding:6px 10px;border-radius:999px;cursor:pointer;user-select:none}
    .pill.active{border-color:var(--accent);box-shadow:var(--accent-glow)}

    .btn{display:inline-flex;align-items:center;gap:8px;padding:12px 16px;border:1px solid rgba(255,255,255,.14);border-radius:12px;transition:transform .2s ease, box-shadow .2s ease, border-color .2s ease; position:relative; overflow:hidden}
    .btn:hover{transform:translateY(-2px);border-color:var(--accent);box-shadow:var(--accent-glow)}
    .btn.accent{background:linear-gradient(180deg,rgba(138,154,91,.16),rgba(138,154,91,.06));border-color:rgba(138,154,91,.65)}

    section{padding:72px 0}
    h1,h2,h3{margin:0 0 12px}
    .muted{color:var(--muted)}
    .tag{color:var(--accent);text-transform:uppercase;letter-spacing:.18em;font-size:.76rem}

    .hero{position:relative;display:grid;grid-template-columns:1.2fr .8fr;gap:32px;align-items:center;min-height:72vh}
    .hero h1{font-size:clamp(28px,4.4vw,52px);line-height:1.05}
    .hero p{font-size:clamp(14px,1.4vw,18px)}
    .cta{display:flex;gap:12px;flex-wrap:wrap;margin-top:18px}
    .portrait{border-radius:16px;overflow:hidden;border:1px solid rgba(255,255,255,.1);box-shadow:0 12px 40px rgba(0,0,0,.45)}

    .about{display:grid;grid-template-columns:1fr;gap:28px}
    .card{border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:22px;background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,.01)); position:relative; overflow:hidden}

    .services{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    .service{padding:22px;border-radius:16px;border:1px solid rgba(255,255,255,.08);transition:box-shadow .2s ease,border-color .2s ease; position:relative; overflow:hidden}
    .service:hover{border-color:var(--accent);box-shadow:var(--accent-glow)}

    .process{display:grid;grid-template-columns:repeat(4,1fr);gap:14px}
    .step{padding:18px 16px;border:1px dashed rgba(255,255,255,.14);border-radius:14px}

    /* Scroll-snap carousel */
    .carousel{position:relative;border-radius:16px;padding:10px;background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,.01));box-shadow:0 8px 30px rgba(0,0,0,.35)}
    .viewport{overflow-x:auto;overflow-y:hidden;border-radius:12px;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch;scroll-behavior:smooth}
    .track{display:flex;gap:12px;user-select:none}
    .slide{flex:0 0 100%;display:flex;align-items:center;justify-content:center;min-height:56vh;background:#0E1524;border-radius:12px;scroll-snap-align:start; position:relative; overflow:hidden}
    .slide img{max-height:56vh;border-radius:12px;border:1px solid rgba(255,255,255,.08);user-select:none;pointer-events:none; transition:transform .25s ease}
    .dots{display:flex;gap:6px;justify-content:center;margin:10px 0 4px}
    .dot{width:8px;height:8px;border-radius:50%;border:1px solid rgba(255,255,255,.25);background:transparent;cursor:pointer}
    .dot.active{background:var(--accent);border-color:var(--accent);box-shadow:var(--accent-glow)}

    @media (max-width:980px){
      .hero{grid-template-columns:1fr}
      .services{grid-template-columns:1fr;gap:12px}
      .process{grid-template-columns:repeat(2,1fr)}
      .slide{min-height:42vh}
      .slide img{max-height:42vh}
    }
    @media (max-width:560px){nav ul{display:none}}

    /* Lightbox */
    .lightbox{position:fixed;inset:0;background:rgba(0,0,0,.9);display:none;align-items:center;justify-content:center;z-index:80}
    .lightbox.open{display:flex}
    .lightbox img{max-width:92vw;max-height:86vh;border-radius:12px;border:1px solid rgba(255,255,255,.18);box-shadow:0 10px 36px rgba(0,0,0,.6);transition:transform .05s linear;cursor:grab;touch-action:none}
    .lightbox .close{position:absolute;top:18px;right:18px}

    /* === Neon Additions === */
    @keyframes neonPulse { 
      0%, 100% { box-shadow: 0 0 0 rgba(138,154,91,0), 0 0 0 rgba(138,154,91,0); }
      50% { box-shadow: 0 0 18px rgba(138,154,91,.35), 0 0 36px rgba(138,154,91,.15); }
    }
    @keyframes glowFlicker {
      0% { text-shadow: 0 0 0 rgba(138,154,91,0); }
      10% { text-shadow: 0 0 8px rgba(138,154,91,.6), 0 0 18px rgba(138,154,91,.25); }
      11% { text-shadow: 0 0 2px rgba(138,154,91,.2); }
      20% { text-shadow: 0 0 10px rgba(138,154,91,.7), 0 0 22px rgba(138,154,91,.3); }
      21% { text-shadow: 0 0 3px rgba(138,154,91,.25); }
      100% { text-shadow: 0 0 10px rgba(138,154,91,.55), 0 0 24px rgba(138,154,91,.22); }
    }
    @keyframes sweep {
      0% { transform: translateX(-120%) skewX(-12deg); opacity:.0; }
      50% { opacity:.6; }
      100% { transform: translateX(120%) skewX(-12deg); opacity:0; }
    }
    @keyframes orbitBorder { to { --ang: 360deg; } }

    .logo .en, .logo .ru { animation: glowFlicker 2.2s ease-out 1 both; }
    .tag { filter: drop-shadow(0 0 10px rgba(138,154,91,.35)); position: relative; }
    .btn.accent { animation: neonPulse 2.6s ease-in-out infinite; }
    .btn::after, .service::after, .card::after, .slide::after {
      content: ""; position: absolute; inset: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.25), transparent);
      transform: translateX(-120%) skewX(-12deg); opacity: 0; pointer-events:none;
    }
    .btn:hover::after, .service:hover::after, .card:hover::after, .slide:hover::after { animation: sweep .9s ease; }

    .carousel{ --ang:0deg; background:
        radial-gradient(1200px 600px at 10% 0%, rgba(138,154,91,.06), rgba(255,255,255,0) 60%) no-repeat,
        linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01));
    }
    .carousel::before {
      content: ""; position: absolute; inset: 0; padding: 1px; border-radius: 16px;
      background: conic-gradient(from var(--ang), rgba(138,154,91,.0) 0%, rgba(138,154,91,.35) 15%, rgba(138,154,91,.0) 25%, rgba(138,154,91,.0) 75%, rgba(138,154,91,.35) 85%, rgba(138,154,91,.0) 100%);
      -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask-composite: xor; mask-composite: exclude; border-radius: 18px; pointer-events: none;
      animation: orbitBorder 6s linear infinite;
    }
    .hero::before {
      content:""; position:absolute; inset:0; z-index:-1;
      background: radial-gradient(600px 300px at 20% 10%, rgba(138,154,91,.10), rgba(0,0,0,0) 60%);
      filter: blur(18px); animation: heroGlow 12s ease-in-out infinite alternate;
    }
    @keyframes heroGlow {
      0% { transform: translate3d(-2%, -2%, 0) scale(1.0); opacity:.35; }
      100%{ transform: translate3d(6%, 4%, 0) scale(1.08); opacity:.6; }
    }
    .reveal { opacity: 0; transform: translateY(10px) scale(.995); transition: opacity .6s ease, transform .6s ease; }
    .reveal.show { opacity: 1; transform: translateY(0) scale(1); }
    nav a:hover { text-shadow: 0 0 10px rgba(138,154,91,.45); }

    /* Magnetic hover targets */
    .magnet{ position:relative; }
    .magnet:hover{ filter: drop-shadow(0 0 14px rgba(138,154,91,.35)); }

    /* Click ripple */
    .ripple{ position:absolute; border-radius:50%; background: rgba(138,154,91,.35); transform: scale(0); animation: ripple .6s ease-out forwards; pointer-events:none; mix-blend-mode:screen; }
    @keyframes ripple{ to { transform: scale(6); opacity:0; } }

    /* Spray canvas */
    #sprayCanvas{
      position:fixed; inset:0; z-index:90; pointer-events:none; mix-blend-mode:screen;
    }
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="logo" aria-label="BORCHEV / БОРЩЕВ">
        <span class="en">BORCHEV</span>
        <span class="ru">БОРЩЕВ</span>
      </div>
      <nav>
        <ul>
          <li><a href="#work" data-i18n="menu.work">Work</a></li>
          <li><a href="#services" data-i18n="menu.services">Services</a></li>
          <li><a href="#process" data-i18n="menu.process">Process</a></li>
          <li><a href="#about" data-i18n="menu.about">About</a></li>
          <li><a href="#contact" data-i18n="menu.contact">Contact</a></li>
        </ul>
      </nav>
      <div class="lang-switch" role="group" aria-label="language switcher">
        <span class="pill active" data-lang="en">EN</span>
        <span class="pill" data-lang="ru">RU</span>
      </div>
    </div>
  </header>

  <main>
    <!-- Hero -->
    <section class="hero container reveal" id="hero">
      <div>
        <div class="tag" data-i18n="tag.hero">Street Art & Photo & Retouch</div>
        <h1 data-i18n="hero.title">Street Art & Photo & Retouch with a Bold Soul</h1>
        <p class="muted" data-i18n="hero.sub">Irvine, California — open for projects in OC, SD & LA.</p>
        <div class="cta">
          <a class="btn accent magnet" href="#contact" data-i18n="hero.cta">Send request</a>
          <a class="btn magnet" href="#contact" data-i18n="hero.cta">Send request</a>
        </div>
      </div>
      <div class="portrait">
        <img src="https://github.com/AlenaSprite/borchov-assets/blob/main/IMG_8390.JPG?raw=true" alt="Daniil Borchev portrait" loading="eager" />
      </div>
    </section>

    <!-- About single -->
    <section id="about" class="container reveal">
      <div class="about">
        <div class="card">
          <h2 data-i18n="about.title">About</h2>
          <p data-i18n="about.text">I am Daniil, founder of Borchev. Street artist and retoucher. I create bold visuals, murals, and clean post-production.</p>
        </div>
      </div>
    </section>

    <!-- Services -->
    <section id="services" class="container reveal">
      <h2 data-i18n="services.title">Services</h2>
      <div class="services">
        <div class="service magnet">
          <h3 data-i18n="services.s1">Photography</h3>
          <p class="muted" data-i18n="services.s1d">Portraits, events, product visuals with a street touch.</p>
        </div>
        <div class="service magnet">
          <h3 data-i18n="services.s2">Retouch</h3>
          <p class="muted" data-i18n="services.s2d">Clean, natural retouching for editorial & commercial work.</p>
        </div>
        <div class="service magnet">
          <h3 data-i18n="services.s3">Street Art</h3>
          <p class="muted" data-i18n="services.s3d">Murals & lettering, bold textures, urban aesthetics.</p>
        </div>
      </div>
    </section>

    <!-- Process -->
    <section id="process" class="container reveal">
      <h2 data-i18n="process.title">Process</h2>
      <div class="process">
        <div class="step"><strong data-i18n="process.p1">Discovery</strong><div class="muted" data-i18n="process.p1d">Brief, goals, scope.</div></div>
        <div class="step"><strong data-i18n="process.p2">Concept</strong><div class="muted" data-i18n="process.p2d">Mood, references, plan.</div></div>
        <div class="step"><strong data-i18n="process.p3">Create</strong><div class="muted" data-i18n="process.p3d">Shooting / painting / retouch.</div></div>
        <div class="step"><strong data-i18n="process.p4">Delivery</strong><div class="muted" data-i18n="process.p4d">Final files & wrap‑up.</div></div>
      </div>
    </section>

    <!-- Work: scroll-snap carousels -->
    <section id="work" class="container reveal">
      <h2 data-i18n="work.title">Work</h2>

      <div class="work-block" data-cat="street">
        <div class="tag" data-i18n="work.street">Street Art</div>
        <div id="street-carousel" class="carousel">
          <div class="viewport" id="street-viewport"><div class="track" id="street-track"></div></div>
          <div class="dots" id="street-dots"></div>
        </div>
      </div>

      <div class="work-block" data-cat="retouch" style="margin-top:26px">
        <div class="tag" data-i18n="work.retouch">Photo & Retouch</div>
        <div id="retouch-carousel" class="carousel">
          <div class="viewport" id="retouch-viewport"><div class="track" id="retouch-track"></div></div>
          <div class="dots" id="retouch-dots"></div>
        </div>
      </div>
    </section>

    <!-- Contact -->
    <section id="contact" class="container reveal">
      <h2 data-i18n="contact.title">Contact</h2>
      <p class="muted" data-i18n="contact.desc">Send a short brief and your preferred dates — I will reply soon.</p>
      <form onsubmit="event.preventDefault(); alert(i18n.t('contact.thanks')); this.reset();">
        <input name="name" placeholder="Name / Имя" aria-label="name" required />
        <input type="email" name="email" placeholder="Email" aria-label="email" required />
        <textarea name="message" placeholder="Message / Сообщение" aria-label="message" required></textarea>
        <button class="btn accent magnet" type="submit" data-i18n="contact.send">Send / Отправить</button>
      </form>
    </section>

    <footer class="container" style="padding:42px 0;color:var(--muted);font-size:.9rem">
      © <span id="year"></span> <span class="en">BORCHEV</span><span class="ru" style="display:none">БОРЩЕВ</span>. <span data-i18n="footer">All rights reserved.</span>
    </footer>
  </main>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox" role="dialog" aria-modal="true" aria-label="image viewer">
    <button class="btn close" aria-label="close" title="Close">✕</button>
    <img alt="preview" />
  </div>

  <!-- Spray Canvas -->
  <canvas id="sprayCanvas"></canvas>

  <script>
    // Smooth scroll
    document.querySelectorAll('a[href^="#"]').forEach(a=>{
      a.addEventListener('click', e=>{
        const id=a.getAttribute('href');
        const el=document.querySelector(id);
        if(el){ e.preventDefault(); el.scrollIntoView({behavior:'smooth',block:'start'}); }
      });
    });
    document.getElementById('year').textContent=new Date().getFullYear();

    // i18n
    const i18n=(function(){
      const dict={
        en:{
          'menu.work':'Work','menu.services':'Services','menu.process':'Process','menu.about':'About','menu.contact':'Contact',
          'tag.hero':'Street Art & Photo & Retouch',
          'hero.title':'Street Art & Photo & Retouch with a Bold Soul',
          'hero.sub':'Irvine, California — open for projects in OC, SD & LA.',
          'hero.cta':'Send request',
          'about.title':'About','about.text':'I am Daniil, founder of Borchev. Street artist and retoucher. I create bold visuals, murals, and clean post-production.',
          'services.title':'Services','services.s1':'Photography','services.s1d':'Portraits, events, product visuals with a street touch.','services.s2':'Retouch','services.s2d':'Clean, natural retouching for editorial & commercial work.','services.s3':'Street Art','services.s3d':'Murals & lettering, bold textures, urban aesthetics.',
          'process.title':'Process','process.p1':'Discovery','process.p1d':'Brief, goals, scope.','process.p2':'Concept','process.p2d':'Mood, references, plan.','process.p3':'Create','process.p3d':'Shooting / painting / retouch.','process.p4':'Delivery','process.p4d':'Final files & wrap‑up.',
          'work.title':'Work','work.street':'Street Art','work.retouch':'Photo & Retouch',
          'contact.title':'Contact','contact.desc':'Send a short brief and your preferred dates — I will reply soon.','contact.send':'Send / Отправить',
          'contact.thanks':'Thank you! Daniil will reply soon. / Спасибо! Даниил скоро ответит.',
          'footer':'All rights reserved.'
        },
        ru:{
          'menu.work':'Работы','menu.services':'Услуги','menu.process':'Процесс','menu.about':'Обо мне','menu.contact':'Контакты',
          'tag.hero':'Стрит-арт и фото/ретушь',
          'hero.title':'Стрит-арт и фото/ретушь со смелой душой',
          'hero.sub':'Ирвайн, Калифорния — открыт к проектам в Орандж, Сан-Диего и Лос-Анджелесе.',
          'hero.cta':'Оставить запрос',
          'about.title':'Обо мне','about.text':'Я Даниил, основатель фирмы Borchev. Стрит-арт, фото и ретуш. Создаю смелые визуалы, муралы и чистую постобработку.',
          'services.title':'Услуги','services.s1':'Фотосъёмка','services.s1d':'Портреты, события, предметка с уличным характером.','services.s2':'Ретушь','services.s2d':'Чистая, естественная ретушь для коммерции и редакции.','services.s3':'Стрит-арт','services.s3d':'Муралы и леттеринг, фактуры и урбан-эстетика.',
          'process.title':'Процесс','process.p1':'Диагностика','process.p1d':'Бриф, цели, рамки.','process.p2':'Концепция','process.p2d':'Настроение, референсы, план.','process.p3':'Создание','process.p3d':'Съёмка / роспись / ретушь.','process.p4':'Передача','process.p4d':'Финальные файлы и завершение.',
          'work.title':'Работы','work.street':'Стрит-арт','work.retouch':'Фото и ретушь',
          'contact.title':'Контакты','contact.desc':'Опишите задачу и желаемые даты — я отвечу в ближайшее время.','contact.send':'Отправить / Send',
          'contact.thanks':'Спасибо! Даниил скоро ответит. / Thank you! Daniil will reply soon.',
          'footer':'Все права защищены.'
        }
      };
      let current='en';
      function t(key){ return (dict[current]&&dict[current][key])||key; }
      function apply(){
        document.querySelectorAll('[data-i18n]').forEach(el=>{
          const key=el.getAttribute('data-i18n');
          el.textContent=t(key);
        });
        document.querySelector('.logo .en').style.display=current==='en'?'inline':'none';
        document.querySelector('.logo .ru').style.display=current==='ru'?'inline':'none';
        document.querySelector('footer .en').style.display=current==='en'?'inline':'none';
        document.querySelector('footer .ru').style.display=current==='ru'?'inline':'none';
        document.documentElement.lang=current;
        document.querySelectorAll('.lang-switch .pill').forEach(p=>p.classList.toggle('active',p.dataset.lang===current));
      }
      function set(lang){ current=lang; localStorage.setItem('lang',lang); apply(); }
      function init(){ const saved=localStorage.getItem('lang'); if(saved&&(saved==='en'||saved==='ru')) current=saved; apply(); }
      return {init,set,t};
    })();
    i18n.init();
    document.querySelectorAll('.lang-switch .pill').forEach(p=>p.addEventListener('click',()=>i18n.set(p.dataset.lang)));

    // Data
    const streetURLs=[
      "https://github.com/AlenaSprite/borchov-assets/blob/main/IMG_8384.JPG?raw=true",
      "https://github.com/AlenaSprite/borchov-assets/blob/main/IMG_8385.JPG?raw=true",
      "https://github.com/AlenaSprite/borchov-assets/blob/main/IMG_8386.JPG?raw=true",
      "https://github.com/AlenaSprite/borchov-assets/blob/main/IMG_8387.JPG?raw=true",
      "https://github.com/AlenaSprite/borchov-assets/blob/main/IMG_8388.JPG?raw=true",
      "https://github.com/AlenaSprite/borchov-assets/blob/main/IMG_8391.JPG?raw=true",
      "https://github.com/AlenaSprite/borchov-assets/blob/main/IMG_8392.JPG?raw=true",
      "https://github.com/AlenaSprite/borchov-assets/blob/main/IMG_8393.JPG?raw=true",
      "https://github.com/AlenaSprite/borchov-assets/blob/main/IMG_8394.JPG?raw=true",
      "https://github.com/AlenaSprite/borchov-assets/blob/main/IMG_8396.JPG?raw=true",
      "https://github.com/AlenaSprite/borchov-assets/blob/main/IMG_8397.JPG?raw=true",
      "https://github.com/AlenaSprite/borchov-assets/blob/main/IMG_8399.JPG?raw=true",
      "https://github.com/AlenaSprite/borchov-assets/blob/main/IMG_8401.JPG?raw=true",
      "https://github.com/AlenaSprite/borchov-assets/blob/main/IMG_8402.JPG?raw=true",
      "https://github.com/AlenaSprite/borchov-assets/blob/main/IMG_8403.JPG?raw=true"
    ];
    const retouchURLs=[
      "https://github.com/AlenaSprite/borchov-assets/blob/main/IMG_8400.JPG?raw=true",
      "https://github.com/AlenaSprite/borchov-assets/blob/main/IMG_8404.JPG?raw=true",
      "https://github.com/AlenaSprite/borchov-assets/blob/main/IMG_8405.JPG?raw=true",
      "https://github.com/AlenaSprite/borchov-assets/blob/main/IMG_8406.JPG?raw=true",
      "https://github.com/AlenaSprite/borchov-assets/blob/main/IMG_8407.JPG?raw=true"
    ];

    // Build scroll-snap carousel
    function buildCarousel(viewport, track, dots, urls){
      urls.forEach(u=>{
        const slide=document.createElement('div'); slide.className='slide magnet';
        const img=new Image(); img.src=u; img.alt='slide'; img.draggable=false;
        slide.appendChild(img); track.appendChild(slide);
        slide.addEventListener('click',()=>openLightbox(urls, [...track.children].indexOf(slide)));
        // parallax tilt on desktop
        slide.addEventListener('mousemove', (e)=>{
          const r=slide.getBoundingClientRect();
          const cx=e.clientX - r.left, cy=e.clientY - r.top;
          const px=(cx/r.width - 0.5)*6, py=(cy/r.height - 0.5)*6;
          img.style.transform=`scale(1.02) translate(${px}px, ${py}px)`;
        });
        slide.addEventListener('mouseleave', ()=>{ img.style.transform=''; });
      });
      // dots + control
      function gap(){ return parseFloat(getComputedStyle(track).gap) || 0; }
      function slideW(){ return viewport.clientWidth + gap(); }
      urls.forEach((_,i)=>{
        const d=document.createElement('button'); d.className='dot'; dots.appendChild(d);
        d.addEventListener('click',()=> viewport.scrollTo({left: i * slideW(), behavior:'smooth'}));
      });
      function updateDots(){
        const i=Math.round(viewport.scrollLeft / slideW());
        [...dots.children].forEach((d,k)=>d.classList.toggle('active',k===i));
      }
      viewport.addEventListener('scroll', ()=>{ requestAnimationFrame(updateDots); });
      window.addEventListener('resize', updateDots);
      viewport.scrollLeft = 0; updateDots();
    }

    buildCarousel(document.getElementById('street-viewport'), document.getElementById('street-track'), document.getElementById('street-dots'), streetURLs);
    buildCarousel(document.getElementById('retouch-viewport'), document.getElementById('retouch-track'), document.getElementById('retouch-dots'), retouchURLs);

    // Lightbox + swipe + zoom/pan
    const lb=document.getElementById('lightbox');
    const lbImg=lb.querySelector('img');
    const closeBtn=lb.querySelector('button.close');

    let currentSet=[], currentIndex=0;
    function openLightbox(set, index){
      currentSet=set.slice();
      currentIndex=index;
      lbImg.src=currentSet[currentIndex];
      lb.classList.add('open');
      resetTransform();
    }
    function step(d){
      currentIndex=(currentIndex+d+currentSet.length)%currentSet.length;
      lbImg.src=currentSet[currentIndex];
      resetTransform();
    }
    function closeLB(){ lb.classList.remove('open'); }

    // Swipe in lightbox
    let sx=0, sy=0, horiz=false;
    lb.addEventListener('touchstart',e=>{ sx=e.changedTouches[0].clientX; sy=e.changedTouches[0].clientY; horiz=false; },{passive:true});
    lb.addEventListener('touchmove',e=>{
      const cx=e.changedTouches[0].clientX, cy=e.changedTouches[0].clientY;
      const dx=cx-sx, dy=cy-sy;
      if(!horiz){
        if(Math.abs(dx)>8 && Math.abs(dx)>Math.abs(dy)) horiz=true; else return;
      }
      if(e.cancelable) e.preventDefault();
    },{passive:false});
    lb.addEventListener('touchend',e=>{
      const dx=e.changedTouches[0].clientX-sx;
      if(Math.abs(dx)>40) step(dx<0?1:-1);
    },{passive:true});

    // Zoom & pan
    let scale=1, panX=0, panY=0, isDrag=false, lastX=0, lastY=0;
    function resetTransform(){ scale=1; panX=panY=0; lbImg.style.transform=''; lbImg.style.cursor='grab'; }
    function applyTransform(){ lbImg.style.transform=`translate(${panX}px,${panY}px) scale(${scale})`; }
    lbImg.addEventListener('wheel',e=>{
      e.preventDefault();
      const delta=-Math.sign(e.deltaY)*0.15;
      const next=Math.min(4, Math.max(1, scale+delta));
      if(next!==scale){ scale=next; applyTransform(); lbImg.style.cursor=scale>1?'grab':'zoom-in'; }
    },{passive:false});
    lbImg.addEventListener('mousedown',e=>{
      if(scale<=1) return;
      isDrag=true; lastX=e.clientX; lastY=e.clientY; lbImg.style.cursor='grabbing';
    });
    window.addEventListener('mousemove',e=>{
      if(!isDrag) return;
      panX += e.clientX-lastX; panY += e.clientY-lastY; lastX=e.clientX; lastY=e.clientY;
      applyTransform();
    });
    window.addEventListener('mouseup',()=>{ if(!isDrag) return; isDrag=false; lbImg.style.cursor='grab'; });

    // Close handlers
    closeBtn.addEventListener('click',closeLB);
    lb.addEventListener('click',e=>{ if(e.target===lb) closeLB(); });
    document.addEventListener('keydown',e=>{
      if(!lb.classList.contains('open')) return;
      if(e.key==='Escape') closeLB();
      if(e.key==='ArrowRight') step(1);
      if(e.key==='ArrowLeft')  step(-1);
    });

    // Scroll-reveal
    (function(){
      const io = new IntersectionObserver((entries)=>{
        entries.forEach(e=>{
          if(e.isIntersecting){
            e.target.classList.add('show');
            io.unobserve(e.target);
          }
        });
      }, {threshold: 0.12});
      document.querySelectorAll('.reveal').forEach(el=>io.observe(el));
    })();

    // Magnetic hover (kept, independent from cursor visuals)
    (function(){
      document.querySelectorAll('.magnet').forEach(el=>{
        const strength = 14;
        el.addEventListener('mousemove',e=>{
          const r=el.getBoundingClientRect(); const cx=r.left+r.width/2, cy=r.top+r.height/2;
          const dx=(e.clientX-cx)/r.width, dy=(e.clientY-cy)/r.height;
          el.style.transform=`translate(${dx*strength}px, ${dy*strength}px)`;
        });
        el.addEventListener('mouseleave',()=>{ el.style.transform=''; });
      });
      // Click ripple
      function addRipple(e){
        const target = e.currentTarget;
        const r=target.getBoundingClientRect();
        const ripple=document.createElement('span');
        ripple.className='ripple';
        ripple.style.left=(e.clientX - r.left)+'px';
        ripple.style.top =(e.clientY - r.top)+'px';
        target.appendChild(ripple);
        setTimeout(()=>ripple.remove(), 650);
      }
      document.querySelectorAll('.btn, .slide').forEach(el=>{
        el.addEventListener('click', addRipple);
      });
    })();

    // === Neon Spray Cursor (desktop only) ===
    (function(){
      const isTouch = 'ontouchstart' in window || navigator.maxTouchPoints>0;
      if(isTouch) return; // keep clean on mobile

      const canvas = document.getElementById('sprayCanvas');
      const ctx = canvas.getContext('2d');
      let w=canvas.width=window.innerWidth, h=canvas.height=window.innerHeight;
      window.addEventListener('resize',()=>{ w=canvas.width=window.innerWidth; h=canvas.height=window.innerHeight; });

      // Hide native cursor for desktop
      document.body.style.cursor='none';

      const particles=[];
      function addParticle(x,y,opts={}){
        const p={
          x,y,
          r: opts.r ?? (8 + Math.random()*8),            // radius
          life: opts.life ?? 260,                         // ms
          born: performance.now(),
          vx: opts.vx ?? (Math.random()-0.5)*0.08,
          vy: opts.vy ?? (Math.random()-0.5)*0.08,
          alpha: opts.alpha ?? 0.25 + Math.random()*0.15  // starting transparency
        };
        particles.push(p);
      }
      function splatter(x,y){
        const count = 10 + Math.floor(Math.random()*10);
        for(let i=0;i<count;i++){
          const ang = Math.random()*Math.PI*2;
          const spd = 0.3 + Math.random()*0.8;
          addParticle(x,y,{
            r: 4 + Math.random()*10,
            vx: Math.cos(ang)*spd,
            vy: Math.sin(ang)*spd,
            life: 300 + Math.random()*250,
            alpha: 0.22 + Math.random()*0.2
          });
        }
      }

      let mx=w/2, my=h/2, pmx=mx, pmy=my, lastT=performance.now();
      window.addEventListener('mousemove',(e)=>{
        mx=e.clientX; my=e.clientY;
        // Seed a few particles along the path for a soft trail
        addParticle(mx,my,{r: 10+Math.random()*10, alpha:0.18+Math.random()*0.12, life:220});
        addParticle(mx,my,{r: 18+Math.random()*14, alpha:0.08+Math.random()*0.06, life:260});
      });
      window.addEventListener('mousedown',()=>{ splatter(mx,my); });

      function drawParticle(p, now){
        const age = now - p.born;
        const t = Math.min(1, age / p.life);
        const fade = 1 - t;
        p.x += p.vx; p.y += p.vy;

        // Radial gradient for spray dot
        const g = ctx.createRadialGradient(p.x,p.y,0, p.x,p.y,p.r);
        const c1 = `rgba(138,154,91,${0.22 * p.alpha * fade})`; // core
        const c2 = `rgba(138,154,91,${0.10 * p.alpha * fade})`; // mid
        const c3 = `rgba(138,154,91,0)`;                        // edge
        g.addColorStop(0, c1);
        g.addColorStop(0.45, c2);
        g.addColorStop(1, c3);

        ctx.beginPath();
        ctx.fillStyle = g;
        ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
        ctx.fill();
      }

      function tick(){
        const now = performance.now();
        ctx.clearRect(0,0,w,h);
        // slight base blur by layering
        ctx.globalCompositeOperation = 'lighter';
        for(let i=0;i<particles.length;i++){
          drawParticle(particles[i], now);
        }
        // remove dead
        for(let i=particles.length-1;i>=0;i--){
          if(now - particles[i].born > particles[i].life) particles.splice(i,1);
        }
        requestAnimationFrame(tick);
      }
      tick();
    })();
  </script>
</body>
</html>